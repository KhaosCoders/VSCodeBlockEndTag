<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:conv="clr-namespace:CodeBlockEndTag.Converters"
    xmlns:imaging="clr-namespace:Microsoft.VisualStudio.Imaging;assembly=Microsoft.VisualStudio.Imaging"
    xmlns:local="clr-namespace:CodeBlockEndTag"
    xmlns:v="clr-namespace:CodeBlockEndTag.Shell">

    <conv:AdditionValueConverter x:Key="addConv" />
    <conv:TextColorConverter x:Key="convColor" />

    <ControlTemplate x:Key="tplButton">
        <Canvas Height="{Binding LineHeight}">
            <imaging:CrispImage
                x:Name="imgTag"
                Canvas.Left="4"
                Canvas.Top="0"
                Width="{Binding LineHeight}"
                Height="{Binding LineHeight}"
                Moniker="{Binding IconMoniker}">
                <imaging:CrispImage.Style>
                    <Style TargetType="imaging:CrispImage">
                        <Setter Property="Visibility" Value="Visible" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding DisplayMode}" Value="1">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </imaging:CrispImage.Style>
            </imaging:CrispImage>

            <TextBlock
                x:Name="txtTag"
                Canvas.Left="{Binding LineHeight, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource addConv}, ConverterParameter=8}"
                Canvas.Top="0"
                Background="Transparent"
                Focusable="False"
                FontFamily="{DynamicResource {x:Static v:EndTagColors.FontFamilyKey}}"
                FontSize="{Binding LineHeight}"
                FontStyle="Normal"
                FontWeight="Normal"
                Foreground="{Binding TextColor}"
                KeyboardNavigation.IsTabStop="False"
                Text="{Binding Text}">
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Visibility" Value="Visible" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding DisplayMode}" Value="2">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
        </Canvas>
    </ControlTemplate>

    <Style TargetType="{x:Type local:CBETagControl}">
        <Setter Property="Cursor" Value="Arrow" />
        <Setter Property="Focusable" Value="False" />
        <Setter Property="KeyboardNavigation.IsTabStop" Value="False" />
        <Setter Property="Template" Value="{StaticResource tplButton}" />
    </Style>
</ResourceDictionary>
