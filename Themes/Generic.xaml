<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:conv="clr-namespace:CodeBlockEndTag.Converters"
    xmlns:imaging="clr-namespace:Microsoft.VisualStudio.Imaging;assembly=Microsoft.VisualStudio.Imaging"
    xmlns:local="clr-namespace:CodeBlockEndTag"
    xmlns:v="clr-namespace:CodeBlockEndTag.Shell">

    <conv:TextColorConverter x:Key="convColor" />

    <ControlTemplate x:Key="tplButton">
        <DockPanel Height="{Binding LineHeight}" local:MaxAdornmentWidthExtension.Enable="True">

            <imaging:CrispImage
                Width="{Binding LineHeight}"
                Height="{Binding LineHeight}"
                Margin="4,0,0,0"
                DockPanel.Dock="Left"
                Moniker="{Binding IconMoniker}">
                <imaging:CrispImage.Style>
                    <Style TargetType="imaging:CrispImage">
                        <Setter Property="Visibility" Value="Visible" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding DisplayMode}" Value="1">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </imaging:CrispImage.Style>
            </imaging:CrispImage>

            <TextBlock
                Margin="8,0,0,0"
                Background="Transparent"
                Focusable="False"
                FontFamily="{DynamicResource {x:Static v:EndTagColors.FontFamilyKey}}"
                FontSize="{Binding LineHeight}"
                FontStyle="Normal"
                FontWeight="Normal"
                Foreground="{Binding TextColor}"
                KeyboardNavigation.IsTabStop="False"
                Text="{Binding Text}"
                TextTrimming="CharacterEllipsis">
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Visibility" Value="Visible" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding DisplayMode}" Value="2">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
        </DockPanel>
    </ControlTemplate>

    <Style TargetType="{x:Type local:CBETagControl}">
        <Setter Property="Cursor" Value="Arrow" />
        <Setter Property="Focusable" Value="False" />
        <Setter Property="KeyboardNavigation.IsTabStop" Value="False" />
        <Setter Property="Template" Value="{StaticResource tplButton}" />
    </Style>
</ResourceDictionary>
